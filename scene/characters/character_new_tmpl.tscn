[gd_scene load_steps=23 format=3 uid="uid://bbt512b3oqqht"]

[ext_resource type="Script" path="res://scripts/character2d/moca_player2d.gd" id="1_quowp"]
[ext_resource type="Texture2D" uid="uid://dne7rem2l1r6r" path="res://assets/sprites/characters/moca_char.png" id="2_w2hn8"]
[ext_resource type="AudioStream" uid="uid://87fyp0bgi5jg" path="res://assets/sounds/jump.wav" id="3_l55qa"]
[ext_resource type="AnimationNodeBlendSpace1D" uid="uid://jlati5ecjedo" path="res://scripts/character2d/char_move_anima_tree.tres" id="3_nopgl"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_idgee"]
radius = 5.0
height = 16.0

[sub_resource type="Animation" id="Animation_lwhsx"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="Animation" id="Animation_5cu2c"]
resource_name = "death"
length = 0.8
step = 0.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4, 0.6),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [40, 41, 42, 43]
}

[sub_resource type="Animation" id="Animation_ox81s"]
resource_name = "fall"
length = 0.2
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [10]
}

[sub_resource type="Animation" id="Animation_e2icu"]
resource_name = "idle"
loop_mode = 1
step = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [0, 1]
}

[sub_resource type="Animation" id="Animation_06ser"]
resource_name = "jump"
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [10]
}

[sub_resource type="Animation" id="Animation_vp7gv"]
resource_name = "walk"
length = 0.8
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [10, 11, 12, 13, 14, 15, 16, 17]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_t6u15"]
_data = {
"RESET": SubResource("Animation_lwhsx"),
"death": SubResource("Animation_5cu2c"),
"fall": SubResource("Animation_ox81s"),
"idle": SubResource("Animation_e2icu"),
"jump": SubResource("Animation_06ser"),
"walk": SubResource("Animation_vp7gv")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_v1idl"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_j8xps"]
animation = &"jump"
use_custom_timeline = true
timeline_length = 1.0
stretch_time_scale = true
start_offset = 0.0
loop_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_a6tec"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_gnxnr"]
advance_mode = 2
advance_expression = "abs(direction) < 0.1 and is_on_floor()"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_rn8tv"]
advance_mode = 2
advance_expression = "abs(direction) > 0.1 and is_on_floor()"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_infen"]
advance_mode = 2
advance_expression = "is_on_floor()"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_bm8tl"]
advance_mode = 2
advance_expression = "not is_on_floor()"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_g0yhc"]
advance_mode = 2
advance_expression = "is_on_floor()"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_j5c8p"]
advance_mode = 2
advance_expression = "not is_on_floor()"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_fhm5t"]
states/End/position = Vector2(1260, 129)
states/Start/position = Vector2(341, -9)
states/idle/node = SubResource("AnimationNodeAnimation_v1idl")
states/idle/position = Vector2(468, -9)
states/jump/node = SubResource("AnimationNodeAnimation_j8xps")
states/jump/position = Vector2(742, -9)
states/walk/node = ExtResource("3_nopgl")
states/walk/position = Vector2(468, 195)
transitions = ["Start", "idle", SubResource("AnimationNodeStateMachineTransition_a6tec"), "walk", "idle", SubResource("AnimationNodeStateMachineTransition_gnxnr"), "idle", "walk", SubResource("AnimationNodeStateMachineTransition_rn8tv"), "jump", "walk", SubResource("AnimationNodeStateMachineTransition_infen"), "walk", "jump", SubResource("AnimationNodeStateMachineTransition_bm8tl"), "jump", "idle", SubResource("AnimationNodeStateMachineTransition_g0yhc"), "idle", "jump", SubResource("AnimationNodeStateMachineTransition_j5c8p")]
graph_offset = Vector2(-65, -129)

[node name="character_new_tmpl" type="CharacterBody2D"]
z_index = 5
script = ExtResource("1_quowp")

[node name="Sprite2D" type="Sprite2D" parent="."]
position = Vector2(0, -10)
texture = ExtResource("2_w2hn8")
hframes = 10
vframes = 10

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, -8)
shape = SubResource("CapsuleShape2D_idgee")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_t6u15")
}
autoplay = "idle"

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeStateMachine_fhm5t")
advance_expression_base_node = NodePath("..")
anim_player = NodePath("../AnimationPlayer")
parameters/walk/blend_position = 0.0

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("3_l55qa")
